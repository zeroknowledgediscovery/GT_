
\pgfplotsset{
    discard if/.style 2 args={
        x filter/.code={
            \edef\tempa{\thisrow{#1}}
            \edef\tempb{#2}
            \ifx\tempa\tempb
                \def\pgfmathresult{inf}
            \fi
        }
    },
    discard if not/.style 2 args={
        x filter/.code={
            \edef\tempa{\thisrow{#1}}
            \edef\tempb{#2}
            \ifx\tempa\tempb
            \else
                \def\pgfmathresult{inf}
            \fi
        }
    }
  }
 \begin{tikzpicture}[font=\bf\sffamily\fontsize{8}{10}\selectfont]
    \def\datafile{Figures/plotdata/zsoccer.csv}
    \def\datafileB{Figures/plotdata/zta1.csv}
    \def\datafileC{Figures/plotdata/zcrime_1416.csv}
    \def\datafileD{Figures/plotdata/zterror_1216.csv}
    \def\datafileE{Figures/plotdata/zcrime_1315.csv}
    \def\datafileF{Figures/plotdata/zterror_1115.csv}
    \def\NCOLs{DodgerBlue2}
    \def\MCOLs{DodgerBlue3}
    \def\MCOLsb{white}
    \def\NCOL{Red1}
    \def\MCOL{Red2}
    \def\NCOLB{Red4}
    \def\MCOLB{Red4}
    \def\MCOLBb{white}
    \def\MCOLb{white}
    \def\LWDT{0.015in}
    \def\OPC{.9}
    \def\TEXTCOL{gray} 
    \def\AXISCOL{lightgray!30}
    \def\SCALE{1.2}
    \def\NCOL{black}
    \def\NCOLs{black}

    % \begin{axis}[]
    \def\WDT{1.35in}
    \def\HGT{1.25in}
\node[] (X0) at (0,0) {};
    \begin{groupplot}[at=(X0.south),anchor=north,group style={group name=A,group size= 2 by 2,horizontal sep=.65in, vertical sep=.7in},title style={yshift=.05in},
      legend style={anchor=east,at={(1,.75)},
        inner sep=3pt,draw=none,fill=none,
        fill opacity=.85,align=right,text opacity=1,
        font=\bf\sffamily\fontsize{8}{9}\selectfont,
        text=black},
      grid style={thin,dashed, gray,opacity=.35},
      grid,
      enlargelimits=true,
      scale only axis=true,scaled x ticks = false,scaled y ticks = true,
      height=\HGT,
      width=\WDT,
      enlarge x limits=0.03,
      axis line style={\AXISCOL, opacity=1,ultra  thick, rounded corners=0pt}, 
      y tick label style={/pgf/number format/fixed,/pgf/number format/precision=3,
        /pgf/number format/fixed zerofill,
        /pgf/number format/1000 sep = %\thinspace 
        % Optional if you want to replace comma as the 1000 separator 
      },
      major tick length=0pt,
      ylabel={frequency},
      ylabel style={xshift=-.75in,yshift=0.1in}]
      % 
      \nextgroupplot[xlabel={},text=\TEXTCOL,title={{\Large a.} Robo Soccer}]%ymode=log]
      \addplot[smooth, opacity=\OPC, line width=\LWDT, \NCOLs,mark=*, 
      mark options={%
        scale=\SCALE,draw=\MCOLsb,  thick, fill=\MCOLs,  
      },]table[col sep=comma,x=rank, y=code]
      {\datafile};
    \addlegendentry{simulated};
%
      \nextgroupplot[xlabel={}, ylabel={},text=\TEXTCOL,title={{\Large b.} DARPA GT Urban World},]%ymode=log]
      \addplot[smooth, opacity=\OPC, line width=\LWDT, \NCOLs,mark=*, 
      mark options={%
        scale=\SCALE,draw=\MCOLsb,  thick, fill=\MCOLs,  
      },]table[col sep=comma,x=rank, y=code]
      {\datafileB};
    \addlegendentry{simulated};
 %
      \nextgroupplot[xlabel={rank}, ylabel={},text=\TEXTCOL,,title={{\Large c.} Urban Crime Chicago},xmax=18]
      \addplot[smooth, opacity=\OPC, line width=\LWDT, \NCOL,mark=*, 
      mark options={%
        scale=\SCALE,draw=\MCOLb,  thick, fill=\MCOL,  
      },]table[col sep=comma,x=rank, y=code]
      {\datafileC};
      \addplot[forget plot, smooth, opacity=\OPC, line width=\LWDT, \NCOLB,mark=*, 
      mark options={%
        scale=\SCALE,draw=\MCOLBb,  thick, fill=\MCOLB,  
      },]table[col sep=comma,x=rank, y=code]
      {\datafileE};
    \addlegendentry{real-world};
 %
      \nextgroupplot[xlabel={rank}, ylabel={},text=\TEXTCOL,title={{\Large d.} Global Terrorism}]%ymode=log]
      \addplot[smooth, opacity=\OPC, line width=\LWDT, \NCOL,mark=*, 
      mark options={%
        scale=\SCALE,draw=\MCOLb,  thick, fill=\MCOL,  
      },]table[col sep=comma,x=rank, y=code]
      {\datafileD};
      \addplot[forget plot, smooth, opacity=\OPC, line width=\LWDT, \NCOLB,mark=*, 
      mark options={%
        scale=\SCALE,draw=\MCOLBb,  thick, fill=\MCOLB,  
      },]table[col sep=comma,x=rank, y=code]
      {\datafileF};
    \addlegendentry{real-world};
    \end{groupplot}
%    
\node[anchor=south west] (B) at ([xshift=-1in,yshift=.5in]X0.north) {\large Zipf's Law (Frequency $\propto$ rank$^{-1}$) for Inferred Strength of Predictive Influence ($\gamma$)};
% \node[anchor=west,text=\MCOLs,align=center] (L1) at  ([xshift=1.7in,yshift=.3in]A.east) {Simulated\\\vspace{10pt}\\ No Zipf's Law};
% \node[anchor=north,text=\MCOL,align=center] (L2) at ([xshift=0in,yshift=-1.1in]L1.south) {Real-world\\\vspace{10pt}\\ Zipf's Law Holds:\\ Signature of \\Self-organized\\Criticality};
 
\def\IMP{Figures/plotdata/may.csv}
\node[anchor=west,label={[yshift=.35in,xshift=1in]90: {\Large e.} May Stability Coefficients}] (AA) at ([xshift=3in,yshift=-.5in]X0.east) {
\begin{axis}[legend cell align=left,legend style={anchor=east,at={(.90,1.1)},inner sep=3pt,draw=none,fill=white,fill opacity=.85,align=right,text opacity=1,font=\bf\sffamily\fontsize{8}{9}\selectfont},axis line style={lightgray, opacity=0, thin},%
enlargelimits=true,
%grid,
xshift=.1in,
anchor=north west,
  height=2.5in,
width=1.75in,
    %xbar, 
    ytick=data,% crucial line for the xticklabels directive 
    ymin=0, 
    yticklabels from table={\IMP}{system},
        yticklabel style={font=\bf\sffamily\fontsize{7}{7}\selectfont,align=right,rotate=0, text width=1.1in, anchor=east, yshift=0in,xshift=-.0450in,text=\TEXTCOL},
major tick length=0pt,
xticklabel style={font=\bf\sffamily\fontsize{7}{7}\selectfont,text=\TEXTCOL},
grid,
grid style={lightgray, opacity=.7},
axis on top=false, bar width=15.2pt,xlabel={May coeff.},xlabel style={yshift=0.05in,text=\TEXTCOL},
%enlarge y limits=1,
%enlarge y limits=0.03,
%point meta=explicit symbolic,
] 

\addplot[opacity=1,fill=\MCOLs, xbar,area legend] table [ 
    y expr=\coordindex,
    x=may,%discard if not={color}{0}
] {\IMP};   
\addlegendentry{simulated}
\addplot[opacity=1,fill=\MCOL, draw=black,xbar,area legend] table [ 
    y expr=\coordindex, 
    x=may,discard if not={color}{0.0}
] {\IMP};   
\addlegendentry{real-world}
% \addplot[opacity=1,fill=\MCOLb, draw=black,xbar,area legend] table [ 
%     y expr=\coordindex,
%     x=may,discard if not={color}{1.0}
% ] {\IMP};    
%\addlegendentry{Male}
% \addplot[opacity=1,fill=\FXCOL, area legend] table [ 
%     y expr=\coordindex,
%     x=F
% ] {\IMP};   
% \addlegendentry{Female}

\end{axis} 
};


 \end{tikzpicture}
\vspace{-10pt}